<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>parallax scroll page</title>

    <!--  BOOTSTRAP CSS  -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.css"
    />
    <style>
      .panel {
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
        overflow: hidden;
        will-change: opacity, transform;
        padding: 2rem;
        text-align: center;
      }

      .content-block {
        margin: 1rem 0;
        font-size: 1.5rem;
        font-weight: 600;
        opacity: 1;
        will-change: transform, opacity;
      }
    </style>
  </head>

  <body>
    <div class="container-fluid p-0">
      <section
        class="panel"
        style="background: linear-gradient(to bottom, #3730a3, #6d28d9)"
      >
        <div class="content-block text-white">First block content</div>
        <div class="content-block text-white">Second block content</div>
        <div class="content-block text-white">Third block content</div>
      </section>

      <section
        class="panel"
        style="background: linear-gradient(to bottom, #3730a3, #6d28d9)"
      >
        <div class="content-block text-white">Second slide - block A</div>
        <div class="content-block text-white">Second slide - block B</div>
        <div class="content-block text-white">Second slide - block C</div>
      </section>

      <section
        class="panel"
        style="background: linear-gradient(to bottom, #6d28d9, #db2777)"
      >
        <div class="content-block text-white">Third slide - block 1</div>
        <div class="content-block text-white">Third slide - block 2</div>
        <div class="content-block text-white">Third slide - block 3</div>
      </section>
    </div>

    <!--  SCRİPT  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script>
      gsap.registerPlugin(ScrollTrigger);

      const panels = document.querySelectorAll(".panel");

      panels.forEach((panel, idx) => {
        const blocks = panel.querySelectorAll(".content-block");

        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: panel,
            start: "top top",
            end: () => "+=" + window.innerHeight * 1.5, // 1.5 viewport = biraz bekleme + animasyon
            scrub: true,
            pin: true,
            anticipatePin: 1,
            // markers: true
          },
        });

        // Panel tam açıldığında bekleme (scroll scrub ile)
        tl.to({}, { duration: 1 }); // boş tween → panel açıldığında kısa süre bekleme

        // Blok animasyonları
        blocks.forEach((block, i) => {
          const direction = i % 2 === 0 ? -200 : 200;
          tl.to(block, {
            x: direction,
            opacity: 0,
            duration: 0.4,
            ease: "none",
          });
        });

        // Panel fade out (sonraki panel için)
        if (idx < panels.length - 1) {
          tl.to(panel, { opacity: 0, duration: 0.5, ease: "none" });
        }
      });

      window.addEventListener("resize", () => {
        ScrollTrigger.refresh();
      });
    </script>
  </body>
</html>
